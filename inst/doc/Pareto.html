<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Ulrich Riegel" />

<meta name="date" content="2021-02-28" />

<title>Pareto Package Vignette</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Pareto Package Vignette</h1>
<h4 class="author">Ulrich Riegel</h4>
<h4 class="date">2021-02-28</h4>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>The (European) Pareto distribution is probably the most popular distribution for modeling large losses in reinsurance pricing. There are good reasons for this popularity, which are discussed in detail in Fackler (2013). We recommend Philbrick (1985) and Schmutz <em>et.al.</em> (1998) for an impression of how the (European) Pareto distribution is applied in practice.</p>
<p>In cases where the Pareto distribution is not flexible enough, pricing actuaries sometimes use piecewise Pareto distributions. For instance, a Pareto alpha of 1.5 is used to model claim sizes between USD 1M and USD 5M and an alpha of 2.5 is used above USD 5M. A particularly useful and non-trivial application of the piecewise Pareto distribution is that it can be used to match a tower of expected layer losses with a layer independent collective loss model. Details are described in Riegel (2018), who also provides a matching algorithm that works for an arbitrary number of reinsurance layers.</p>
<p>The package provides a tool kit for the Pareto, the piecewise Pareto and the generalized Pareto distribution, which is useful for pricing of reinsurance treaties. In particular, the package provides the matching algorithm for layer losses.</p>
</div>
<div id="pareto-distribution" class="section level2">
<h2>Pareto distribution</h2>
<p><strong>Definition:</strong> Let <span class="math inline">\(t&gt;0\)</span> and <span class="math inline">\(\alpha&gt;0\)</span>. The <em>Pareto distribution</em> <span class="math inline">\(\text{Pareto}(t,\alpha)\)</span> is defined by the distribution function <span class="math display">\[
F_{t,\alpha}(x):=\begin{cases}
0 &amp; \text{ for $x\le t$} \\
\displaystyle 1-\left(\frac{t}{x}\right)^{\alpha} &amp; \text{ for $x&gt;t$.}
\end{cases}
\]</span> This version of the Pareto distribution is also known as <em>Pareto type I</em>, <em>European Pareto</em> or <em>single-parameter Pareto</em>.</p>
<div id="distribution-function-and-density" class="section level3">
<h3>Distribution function and density</h3>
<p>The functions <code>pPareto</code> and <code>dPareto</code> provide the distribution function and the density function of the Pareto distribution:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Pareto)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pPareto</span>(x, <span class="dv">1000</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 0.0000000 0.7500000 0.8888889 0.9375000 0.9600000 0.9722222 0.9795918
##  [8] 0.9843750 0.9876543 0.9900000</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">pPareto</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5000</span>, <span class="dv">1000</span>, <span class="dv">2</span>), <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;CDF(x)&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dPareto</span>(x, <span class="dv">1000</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 2.000000e-03 2.500000e-04 7.407407e-05 3.125000e-05 1.600000e-05
##  [6] 9.259259e-06 5.830904e-06 3.906250e-06 2.743484e-06 2.000000e-06</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">dPareto</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5000</span>, <span class="dv">1000</span>, <span class="dv">2</span>), <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;PDF(x)&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAXVBMVEUAAAAAADoAAGYAOpAAZrY6AAA6ADo6kNtmAABmADpmAGZmOpBmZmZmtttmtv+QOgCQOmaQZgCQ2/+2ZgC2/7a2///bkDrb2//b/9vb////tmb/25D//7b//9v////szdJ9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAG5ElEQVR4nO2d23bbNhBFGTtpnF6iNkrYVrH4/58ZgjeLosFDAIPLQGc/ZCnLAIbaBoEZipSbjuzS5D6A0qEgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQBhQY0acgk61Oj44UWjZEFOv8BYFCzIcYpHIrEgl1P7IQW5DEdBqEm9gl5fPvf/Xvp39/TDf7jaBbXP/5tXX72Hq1zQpGbQ5Ddc5YJ+fhoEXSwnGQWJzaDMhiIJMm/sYzcv137DVSyoGxx9+NZvZBY/x0uNWgVJDEdBqA0FgTYUBNpUK2jcxUb886CKBXXXk7UIcxiuiH0+0il2PX0MH65mQX0GZKlSHYarWpDIcBSEGlEQaFSvoOtpd5N/eEHtXKRaq9XHFnQ9LVoCrgeVsY1FyqSXPT7gimLFgqRmUAnnWKw1aJpC92vQW412LGitgpZy1TJ/6p5Bl+mw92sJkbgKBfVTYypD+1QHlezBcQtYpR0Fvf5+62T9v1tkEkWFgg4ilCjqFHT9F7YV2+YLWITcBb2+jIvQ9W/rCiSVKOoU1J82H76Zs8i+RD/2DJpXYNtnpgZrougaN/8i5LVIG0P7WZBQoqhU0Llp/jrZ37tkXI2C+skx3mAXkCYej6tR0B/j1NnZxW5ow3YxjYLSxs1+jkUqNcTiahOUuFhVKKg7drlDqFjt8i9CZRerXaWC5EqN/OeY6yJtu3N+hVyxqlPQzQR5n0efQVCQXLHaZV+E4ggSK1a77FMokiC5uBQEWz6UoKZxf7/KBL29xSSXO7rcU6j0ar6jINxUmaDxLAu74OrmW5eg85gDtrufagjG7TJPIVdBF/OZmGF6JjV63E6XoJtHDM7gYQOhuJ0uQTfPoNouxwvHHRpnNOR/ucN2IUM47tCYgkBjCkKt8xmiIBTarWGOWqzTJCh93Kl5NkMUhCK7NmybwDukHePO7XMZchXU9qVGYJXhFndur0TQeDHR9llOjLhz+1yGvLb5sB3eLe7SgYJAh0yG1AjKNYX0CUpsSI+gTFNIR6kxdsliSEkmPfbJYSixoCbkTT6CoLDhchiKJEjuJs51r/SG4ggSvIlz3Su9oSiCJG/Bu+uW3FAUQZI3cd73S21I2QxKbyjWGiR3E+emZ1pDkXYxwZs4Nz3TGlKVB01dkypSKGj9d4HEjsgWTLzhQKREce6cUJGuRPGtezJF6rb5uX8qRdoSxbcB7gkd0BZHvGGXZAa9YyiOI32J4s0Y7yEw7jqIeMOBiIniahQbIqOPIcQbph3OqkhKk3ZBQFG4KpWJ4v1YzrgMLt7QED1R3AwniteBxtjmRX/Xso6W4DkTxcMHeZgIhjLOoOMH6YioocSJ4ip0LEH3oQoUdChRjCzoJlaBgg4Nl8jPJrSLn7yJYhY/8MjWwWtIFKOSLVFUQwxBB7b5Y4OCn4f9OLR7QPPDzwQ9qiDOIAS+onhs0GoF4UTx2KD1ChIalILCfl6DoP2n6ykocNCHF1QTFAQQLlbrQ7hYrY8opUZNRClWa4IzCBClWK2JKMVqTTAPAlAQgIIAFASQF3RpmvlbK48x1C+fV123L/Y5D7uGd/c9xAWZ7/S8uBzV9dS3bs0fhlm6bl+AmMO26t19F2lBYzLp8nWe49cWtU8/lq7bF/v0yUcvyLv7PtKClrfr2K//RS9dty/2+7bP//SCvLvvIy7oNzOj3Uu1c/9+5q7bFyikWYN8uwOkBY2nvPOJb2qXpev2xV5XcyIZQZ7dEWUIusxrtMc7NHWzIkFe03qsff3OkaGNolPMZ2GcLlT6rbLtdDvLVyWLtMfWOl9ECdinz3q2effk7Oen+dqSf6Z31pMoDnPe6Zimc2T8Q9NT1+2LfcZSw7v7HixWARQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBgNIFmfvDXl8yPp1WuiBzl1jWxxtLF9Rdnr5/CbwHKojiBXXnJuwmw0DKF3SR+CPd/hQv6Hr6M+sj6MULap//O+V8xLp0QebLDLJ+i0HpgsZbxDMu06ULyg4FASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFAT4BbpjhBiU5wUuAAAAAElFTkSuQmCC" /><!-- --></p>
<p>The package also provides the quantile function:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qPareto</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">/</span> <span class="dv">10</span>, <span class="dv">1000</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1000.000 1054.093 1118.034 1195.229 1290.994 1414.214 1581.139 1825.742
##  [9] 2236.068 3162.278      Inf</code></pre>
</div>
<div id="simulation" class="section level3">
<h3>Simulation:</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rPareto</span>(<span class="dv">20</span>, <span class="dv">1000</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1361.460 1592.590 1139.756 1101.846 1019.194 5062.058 1368.522 1167.435
##  [9] 1137.132 4819.925 2563.101 1191.829 1865.089 1864.219 1340.808 1920.688
## [17] 1307.672 1130.390 1821.301 1885.846</code></pre>
</div>
<div id="layer-mean" class="section level3">
<h3>Layer mean:</h3>
<p>Let <span class="math inline">\(X\sim \text{Pareto}(t,\alpha)\)</span> and <span class="math inline">\(a, c\ge 0\)</span>. Then <span class="math display">\[
E(\min[c,\max(X-a,0)]) = \int_a^{c+a}(1-F_{t,\alpha}(x))\, dx =: I_{t,\alpha}^{\text{$c$ xs $a$}}
\]</span> is the layer mean of <span class="math inline">\(c\)</span> xs <span class="math inline">\(a\)</span>, i.e. the expected loss to the layer given a single loss <span class="math inline">\(X\)</span>.</p>
<p><em>Example:</em> <span class="math inline">\(t=500\)</span>, <span class="math inline">\(\alpha = 2\)</span>, Layer 4000 xs 1000</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Layer_Mean</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">2</span>, <span class="at">t =</span> <span class="dv">500</span>)</span></code></pre></div>
<pre><code>## [1] 200</code></pre>
</div>
<div id="layer-variance" class="section level3">
<h3>Layer variance:</h3>
<p>Let <span class="math inline">\(X\sim \text{Pareto}(t,\alpha)\)</span> and <span class="math inline">\(a, c\ge 0\)</span>. Then the variance of the layer loss <span class="math inline">\(\min[c,\max(X-a,0)]\)</span> can be calculated with the function <code>Pareto_Layer_Var</code>.</p>
<p><em>Example:</em> <span class="math inline">\(t=500\)</span>, <span class="math inline">\(\alpha = 2\)</span>, Layer 4000 xs 1000</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Layer_Var</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">2</span>, <span class="at">t =</span> <span class="dv">500</span>)</span></code></pre></div>
<pre><code>## [1] 364719</code></pre>
</div>
<div id="why-is-the-pareto-distribution-so-popular" class="section level3">
<h3>Why is the Pareto distribution so popular?</h3>
<p><strong>Lemma:</strong></p>
<ul>
<li>Let <span class="math inline">\(X \sim \text{Pareto}(t,\alpha )\)</span>. Then <span class="math inline">\(cX \sim \text{Pareto}(ct,\alpha )\)</span> for all <span class="math inline">\(c&gt;0\)</span>.</li>
<li>Let <span class="math inline">\(X \sim \text{Pareto}(t_{1} ,\alpha )\)</span>. For <span class="math inline">\(t_2 &gt; t_1\)</span> we then have <span class="math inline">\(X|(X&gt;t_2 ) \sim \text{Pareto}(t_2 ,\alpha )\)</span></li>
</ul>
<p><strong>Consequences:</strong></p>
<ul>
<li>The <em>Pareto alpha</em> is invariant wrt scaling (which implies that <span class="math inline">\(\alpha\)</span> does not depend on currencies and inflation) </li>
<li>For Pareto distributed data the Pareto alpha does not depend on the reporting threshold </li>
<li>For layers and thresholds above <span class="math inline">\(t\)</span> the ratio between expected layer losses and/or excess frequencies depends only on <span class="math inline">\(\alpha\)</span> (and not on <span class="math inline">\(t\)</span>)</li>
</ul>
</div>
<div id="pareto-extrapolation" class="section level3">
<h3>Pareto extrapolation</h3>
<p>Consider two layers <span class="math inline">\(c_i\)</span> xs <span class="math inline">\(a_i\)</span> and a <span class="math inline">\(\text{Pareto}(t,\alpha)\)</span> distributed severity with sufficiently small <span class="math inline">\(t\)</span>. What is the expected loss of <span class="math inline">\(c_2\)</span> xs <span class="math inline">\(a_2\)</span> given the expected loss of <span class="math inline">\(c_1\)</span> xs <span class="math inline">\(a_1\)</span>?</p>
<p><em>Example:</em> Assume <span class="math inline">\(\alpha = 2\)</span> and the expected loss of 4000 xs 1000 is 500. Calculate the expected loss of the layer 5000 xs 5000.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Extrapolation</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">5000</span>, <span class="dv">5000</span>, <span class="dv">2</span>) <span class="sc">*</span> <span class="dv">500</span></span></code></pre></div>
<pre><code>## [1] 62.5</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Extrapolation</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">5000</span>, <span class="dv">5000</span>, <span class="dv">2</span>, <span class="at">ExpLoss_1 =</span> <span class="dv">500</span>)</span></code></pre></div>
<pre><code>## [1] 62.5</code></pre>
</div>
<div id="pareto-alpha-between-two-layers" class="section level3">
<h3>Pareto alpha between two layers:</h3>
<p>Given the expected losses of two layers, there is typically a unique Pareto alpha <span class="math inline">\(\alpha\)</span> which is consistent with the ratio of the expected layer losses.</p>
<p><em>Example:</em> Expected loss of 4000 xs 1000 is 500. Expected loss of 5000 xs 5000 is 62.5. Alpha between the two layers:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Find_Alpha_btw_Layers</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">500</span>, <span class="dv">5000</span>, <span class="dv">5000</span>, <span class="fl">62.5</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Check: see previous example</p>
</div>
<div id="pareto-alpha-between-a-frequency-and-layer" class="section level3">
<h3>Pareto alpha between a frequency and layer:</h3>
<p>Given the expected excess frequency at a threshold and the expected loss of a layer, then there is typically a unique Pareto alpha <span class="math inline">\(\alpha\)</span> which is consistent with this data.</p>
<p><em>Example:</em> Expected frequency in excess of 500 is 2.5. Expected loss of 4000 xs 1000 is 500. Alpha between the frequency and the layer:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Find_Alpha_btw_FQ_Layer</span>(<span class="dv">500</span>, <span class="fl">2.5</span>, <span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">500</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Check:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Layer_Mean</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="dv">2</span>, <span class="at">t =</span> <span class="dv">500</span>) <span class="sc">*</span> <span class="fl">2.5</span></span></code></pre></div>
<pre><code>## [1] 500</code></pre>
</div>
<div id="matching-the-expected-losses-of-two-layers" class="section level3">
<h3>Matching the expected losses of two layers:</h3>
<p>Given the expected losses of two layers, we can use these techniques to obtain a Poisson-Pareto model which matches the expected loss of both layers.</p>
<p><em>Example:</em> Expected loss of 30 xs 10 is 26.66 (Burning Cost). Expected loss of 60 xs 40 is 15.95 (Exposure model).</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Find_Alpha_btw_Layers</span>(<span class="dv">30</span>, <span class="dv">10</span>, <span class="fl">26.66</span>, <span class="dv">60</span>, <span class="dv">40</span>, <span class="fl">15.95</span>)</span></code></pre></div>
<pre><code>## [1] 1.086263</code></pre>
<p>Frequency @ 10:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fl">26.66</span> <span class="sc">/</span> <span class="fu">Pareto_Layer_Mean</span>(<span class="dv">30</span>, <span class="dv">10</span>, <span class="fl">1.086263</span>)</span></code></pre></div>
<pre><code>## [1] 2.040392</code></pre>
<p>A collective model <span class="math inline">\(\sum_{n=1}^NX_n\)</span> with <span class="math inline">\(X_N\sim \text{Pareto}(10, 1.09)\)</span> and <span class="math inline">\(N\sim \text{Poisson}(2.04)\)</span> matches both expected layer losses.</p>
</div>
<div id="frequency-extrapolation-and-alpha-between-frequencies" class="section level3">
<h3>Frequency extrapolation and alpha between frequencies:</h3>
<p>Given the frequency <span class="math inline">\(f_1\)</span> in excess of <span class="math inline">\(t_1\)</span> the frequency <span class="math inline">\(f_2\)</span> in excess of <span class="math inline">\(t_2\)</span> can directly be calculated as follows: <span class="math display">\[
f_2 = f_1 \cdot \left(\frac{t_1}{t_2}\right)^\alpha
\]</span> Vice versa, we can calculate the Pareto alpha, if the two excess frequencies <span class="math inline">\(f_1\)</span> and <span class="math inline">\(f_2\)</span> are given: <span class="math display">\[
\alpha = \frac{\log(f_2/f_1)}{\log(t_1/t_2)}.
\]</span></p>
<p><em>Example:</em></p>
<p>Expected frequency excess 1000 is 2. What is the expected frequency excess 4000 if we have a Pareto alpha of 2.5?</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>t_1 <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>f_1 <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>t_2 <span class="ot">&lt;-</span> <span class="dv">4000</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>(f_2 <span class="ot">&lt;-</span> f_1 <span class="sc">*</span> (t_1 <span class="sc">/</span> t_2)<span class="sc">^</span><span class="fl">2.5</span>)</span></code></pre></div>
<pre><code>## [1] 0.0625</code></pre>
<p>Vice versa:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_Find_Alpha_btw_FQs</span>(t_1, f_1, t_2, f_2)</span></code></pre></div>
<pre><code>## [1] 2.5</code></pre>
</div>
<div id="maximum-likelihood-estimation-of-the-parameter-alpha" class="section level3">
<h3>Maximum likelihood estimation of the parameter alpha</h3>
<p>For <span class="math inline">\(i=1,\dots,n\)</span> let <span class="math inline">\(X_i\sim \text{Pareto}(t,\alpha)\)</span> be Pareto distributed observations. Then we have the ML estimator <span class="math display">\[
\hat{\alpha}^{ML}=\frac{n}{\sum_{i=1}^n\log(X_i/t)}.
\]</span> <em>Example:</em></p>
<p>Pareto distributed losses with a reporting threshold of <span class="math inline">\(t=1000\)</span> and <span class="math inline">\(\alpha = 2\)</span>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> <span class="fu">rPareto</span>(<span class="dv">1000</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha =</span> <span class="dv">2</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_ML_Estimator_Alpha</span>(losses, <span class="at">t =</span> <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 2.088758</code></pre>
<p>In reinsurance, sometimes large loss data from different sources are used for severity fits. Then the losses are typically only available in excess of certain reporting thresholds which may vary by data source. Assume that two data sources each contain 5000 losses in excess of 1000, which are Pareto distributed with an alpha of 2 but from data source 2 we only know the losses exceeding a reporting threshold of 3000. If we apply the standard ML estimator with a threshold of 1000, then we obtain an alpha which is too low, since we ignore that the loss data is not complete in excess of 1000:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>losses_1 <span class="ot">&lt;-</span> <span class="fu">rPareto</span>(<span class="dv">5000</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha =</span> <span class="dv">2</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>losses_2 <span class="ot">&lt;-</span> <span class="fu">rPareto</span>(<span class="dv">5000</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha =</span> <span class="dv">2</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>reported <span class="ot">&lt;-</span> losses_2 <span class="sc">&gt;</span> <span class="dv">3000</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>losses_2 <span class="ot">&lt;-</span> losses_2[reported]</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> <span class="fu">c</span>(losses_1, losses_2)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_ML_Estimator_Alpha</span>(losses, <span class="at">t =</span> <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 1.632439</code></pre>
<p>In the function <code>Pareto_ML_Estimator_Alpha</code> the user can define reporting threshold for each loss in order to handle this situation:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>reporting_thresholds_1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1000</span>, <span class="fu">length</span>(losses_1))</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>reporting_thresholds_2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">3000</span>, <span class="fu">length</span>(losses_2))</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>reporting_thresholds <span class="ot">&lt;-</span> <span class="fu">c</span>(reporting_thresholds_1, reporting_thresholds_2)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_ML_Estimator_Alpha</span>(losses, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">reporting_thresholds =</span> reporting_thresholds)</span></code></pre></div>
<pre><code>## [1] 2.011448</code></pre>
<p>Now, assume that the underlying policies have limits of 5000 or 10000 and that a loss is censored if it exceeds the respective limit. If the underlying losses are Pareto distributed before they are censored then ML estimation leads to a too large value for alpha:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>limits <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">5000</span>, <span class="dv">10000</span>), <span class="fu">length</span>(losses), <span class="at">replace =</span> T)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>censored <span class="ot">&lt;-</span> losses <span class="sc">&gt;</span> limits</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>losses[censored] <span class="ot">&lt;-</span> limits[censored]</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>reported <span class="ot">&lt;-</span> losses <span class="sc">&gt;</span> reporting_thresholds</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> losses[reported]</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>reporting_thresholds <span class="ot">&lt;-</span> reporting_thresholds[reported]</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_ML_Estimator_Alpha</span>(losses, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">reporting_thresholds =</span> reporting_thresholds)</span></code></pre></div>
<pre><code>## [1] 2.114551</code></pre>
<p>In order to deal with this situation the function allows to specify for each loss if it is censored or not:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Pareto_ML_Estimator_Alpha</span>(losses, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">reporting_thresholds =</span> reporting_thresholds, </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">is.censored =</span> censored)</span></code></pre></div>
<pre><code>## [1] 2.017282</code></pre>
</div>
<div id="truncation" class="section level3">
<h3>Truncation</h3>
<p>Let <span class="math inline">\(X\sim \text{Pareto}(t,\alpha)\)</span> and <span class="math inline">\(T&gt;t\)</span>. Then <span class="math inline">\(X|(X&lt;T)\)</span> has a <em>truncated Pareto distribution</em>. The Pareto functions mentioned above are also available for the truncated Pareto distribution.</p>
</div>
</div>
<div id="piecewise-pareto-distribution" class="section level2">
<h2>Piecewise Pareto distribution</h2>
<p><strong>Definition:</strong> Let <span class="math inline">\(\mathbf{t}:=(t_1,\dots,t_n)\)</span> be a vector of thresholds with <span class="math inline">\(0&lt;t_1&lt;\dots&lt;t_n&lt;t_{n+1}:=+\infty\)</span> and let <span class="math inline">\(\boldsymbol\alpha:=(\alpha_1,\dots,\alpha_n)\)</span> be a vector of Pareto alphas with <span class="math inline">\(\alpha_i\ge 0\)</span> and <span class="math inline">\(\alpha_n&gt;0\)</span>. The <em>piecewise Pareto</em> distribution} <span class="math inline">\(\text{PPareto}(\mathbf{t},\boldsymbol\alpha)\)</span> is defined by the distribution function <span class="math display">\[
F_{\mathbf{t},\boldsymbol\alpha}(x):=\begin{cases}
0 &amp; \text{ for $x&lt;t_1$} \\
\displaystyle 1-\left(\frac{t_{k}}{x}\right)^{\alpha_k}\prod_{i=1}^{k-1}\left(\frac{t_i}{t_{i+1}}\right)^{\alpha_i} &amp; \text{ for $x\in [t_k,t_{k+1}).$}
\end{cases}
\]</span></p>
<p>The family of piecewise Pareto distributions is very flexible:</p>
<p><strong>Proposition:</strong> The set of Piecewise Pareto distributions is dense in the space of all positive-valued distributions (with respect to the Lévy metric).</p>
<p>This means that we can approximate any positive valued distribution as good as we want with piecewise Pareto. A very good approximation typically comes at the cost of many Pareto pieces. Piecewise Pareto is often a good alternative to a discrete distribution, since it is much better to handle!</p>
<p>The Pareto package also provides functions for the piecewise Pareto distribution. For instance:</p>
<div id="distribution-function" class="section level3">
<h3>Distribution function</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>, <span class="dv">4000</span>)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">20</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">pPiecewisePareto</span>(x, t, alpha)</span></code></pre></div>
<pre><code>##  [1] 0.0000000 0.7500000 0.8333333 0.9296875 0.9991894 0.9999789 0.9999990
##  [8] 0.9999999 1.0000000 1.0000000</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">pPiecewisePareto</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5000</span>, t, alpha), <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;CDF(x)&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="density" class="section level3">
<h3>Density</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dPiecewisePareto</span>(x, t, alpha)</span></code></pre></div>
<pre><code>##  [1] 2.000000e-03 1.250000e-04 1.666667e-04 3.515625e-04 3.242592e-06
##  [6] 7.048328e-08 2.768239e-09 1.676381e-10 1.413089e-11 1.546188e-12</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">dPiecewisePareto</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5000</span>, t, alpha), <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;PDF(x)&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="simulation-1" class="section level3">
<h3>Simulation</h3>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rPiecewisePareto</span>(<span class="dv">20</span>, t, alpha)</span></code></pre></div>
<pre><code>##  [1] 1063.613 1002.612 1669.623 1846.692 1496.333 2879.062 2880.773 1103.929
##  [9] 1068.508 1255.879 1310.318 1703.050 1286.462 3796.485 1181.393 1975.146
## [17] 4036.377 1570.224 2922.042 3422.376</code></pre>
</div>
<div id="layer-mean-1" class="section level3">
<h3>Layer mean</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PiecewisePareto_Layer_Mean</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, t, alpha)</span></code></pre></div>
<pre><code>## [1] 826.6969</code></pre>
</div>
<div id="layer-variance-1" class="section level3">
<h3>Layer variance</h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PiecewisePareto_Layer_Var</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, t, alpha)</span></code></pre></div>
<pre><code>## [1] 922221.2</code></pre>
</div>
<div id="maximum-likelihood-estimation-of-the-alphas" class="section level3">
<h3>Maximum likelihood estimation of the alphas</h3>
<p>Let <span class="math inline">\(\mathbf{t}:=(t_1,\dots,t_n)\)</span> be a vector of thresholds and let <span class="math inline">\(\boldsymbol\alpha:=(\alpha_1,\dots,\alpha_n)\)</span> be a vector of Pareto alphas. For <span class="math inline">\(i=1,\dots,n\)</span> let <span class="math inline">\(X_i\sim \text{PPareto}(\mathbf{t},\boldsymbol\alpha)\)</span>. If the vector <span class="math inline">\(\mathbf{t}\)</span> is known, then the parameter vector <span class="math inline">\(\boldsymbol\alpha\)</span> can be estimated with maximum likelihood.</p>
<p><em>Example:</em></p>
<p>Piecewise Pareto distributed losses with <span class="math inline">\(\mathbf{t}:=(1000,\,2000,\, 3000)\)</span> and <span class="math inline">\(\boldsymbol\alpha:=(1,\, 2,\, 3)\)</span>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> <span class="fu">rPiecewisePareto</span>(<span class="dv">10000</span>, <span class="at">t =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>), <span class="at">alpha =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PiecewisePareto_ML_Estimator_Alpha</span>(losses, <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>))</span></code></pre></div>
<pre><code>## [1] 1.011585 1.999219 2.965304</code></pre>
<p>Reporting thresholds and censoring of losses can be taken into account as described for the function <code>Pareto_ML_Estimator_Alpha</code>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>losses_1 <span class="ot">&lt;-</span> <span class="fu">rPiecewisePareto</span>(<span class="dv">5000</span>, <span class="at">t =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>), <span class="at">alpha =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>losses_2 <span class="ot">&lt;-</span> <span class="fu">rPiecewisePareto</span>(<span class="dv">5000</span>, <span class="at">t =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>), <span class="at">alpha =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>reported <span class="ot">&lt;-</span> losses_2 <span class="sc">&gt;</span> <span class="dv">3000</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>losses_2 <span class="ot">&lt;-</span> losses_2[reported]</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> <span class="fu">c</span>(losses_1, losses_2)</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PiecewisePareto_ML_Estimator_Alpha</span>(losses, <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>))</span></code></pre></div>
<pre><code>## [1] 0.7834893 1.2457727 2.9783761</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>reporting_thresholds_1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1000</span>, <span class="fu">length</span>(losses_1))</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>reporting_thresholds_2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">3000</span>, <span class="fu">length</span>(losses_2))</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>reporting_thresholds <span class="ot">&lt;-</span> <span class="fu">c</span>(reporting_thresholds_1, reporting_thresholds_2)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PiecewisePareto_ML_Estimator_Alpha</span>(losses, <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>), </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">reporting_thresholds =</span> reporting_thresholds)</span></code></pre></div>
<pre><code>## [1] 1.022747 2.068119 2.978376</code></pre>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>limits <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">2500</span>, <span class="dv">5000</span>, <span class="dv">10000</span>), <span class="fu">length</span>(losses), <span class="at">replace =</span> T)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>censored <span class="ot">&lt;-</span> losses <span class="sc">&gt;</span> limits</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>losses[censored] <span class="ot">&lt;-</span> limits[censored]</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>reported <span class="ot">&lt;-</span> losses <span class="sc">&gt;</span> reporting_thresholds</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> losses[reported]</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>reporting_thresholds <span class="ot">&lt;-</span> reporting_thresholds[reported]</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>censored <span class="ot">&lt;-</span> censored[reported]</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="fu">PiecewisePareto_ML_Estimator_Alpha</span>(losses, <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>), </span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">reporting_thresholds =</span> reporting_thresholds)</span></code></pre></div>
<pre><code>## [1] 1.022747 2.963881 3.388210</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PiecewisePareto_ML_Estimator_Alpha</span>(losses, <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">3000</span>), </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">reporting_thresholds =</span> reporting_thresholds, </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">is.censored =</span> censored)</span></code></pre></div>
<pre><code>## [1] 1.022747 2.080627 2.957848</code></pre>
</div>
<div id="truncation-1" class="section level3">
<h3>Truncation</h3>
<p>The package also provides truncated versions of the piecewise Pareto distribution. There are two options available:</p>
<ul>
<li><code>truncation_type = &#39;lp&#39;</code>: Below the largest threshold <span class="math inline">\(t_n\)</span>, the distribution function equals the distribution of the piecewise Pareto distribution without truncation. The last Pareto piece, however, is truncated at <code>truncation</code></li>
<li><code>truncation_type = &#39;wd&#39;</code>: The whole piecewise Pareto distribution is truncated at `truncation’</li>
</ul>
</div>
</div>
<div id="matching-a-tower-of-layer-losses" class="section level2">
<h2>Matching a tower of layer losses</h2>
<p>The Pareto distribution can be used to build a collective model which matches the expected loss of two layers. We can use piecewise Pareto if we want to match the expected loss of more than two layers.</p>
<p>Consider a sequence of attachment points <span class="math inline">\(0 &lt; a_1 &lt;\dots &lt; a_n&lt;a_{n+1}:=+\infty\)</span>. Let <span class="math inline">\(c_i:=a_{i+1}-a_i\)</span> and let <span class="math inline">\(e_i\)</span> be the expected loss of the layer <span class="math inline">\(c_i\)</span> xs <span class="math inline">\(a_i\)</span>. Moreover, let <span class="math inline">\(f_1\)</span> be the expected frequency in excess of <span class="math inline">\(a_1\)</span>.</p>
<p>The following matching algorithm uses one Pareto piece per layer and is straight forward:</p>
<ul>
<li>Calculate the Pareto alpha <span class="math inline">\(\alpha_1\)</span> between the excess frequency <span class="math inline">\(f_1\)</span> and the layer <span class="math inline">\(c_1\)</span> xs <span class="math inline">\(a_1\)</span></li>
<li>Calculate the frequency <span class="math inline">\(f_2\)</span> in excess of <span class="math inline">\(a_2\)</span>: <span class="math inline">\(f_2:=(a_1/a_2)^{\alpha_1}\cdot f_1\)</span></li>
<li>Calculate the Pareto alpha <span class="math inline">\(\alpha_2\)</span> between the excess frequency <span class="math inline">\(f_2\)</span> and the layer <span class="math inline">\(c_2\)</span> xs <span class="math inline">\(a_2\)</span></li>
<li>Calculate the frequency <span class="math inline">\(f_3\)</span> in excess of <span class="math inline">\(a_3\)</span>: <span class="math inline">\(f_3:=(a_2/a_3)^{\alpha_2}\cdot f_3\)</span></li>
<li><span class="math inline">\(\dots\)</span> </li>
<li>Use a collective model <span class="math inline">\(\sum_{n=1}^NX_n\)</span> with <span class="math inline">\(E(N)=f_1\)</span> and <span class="math inline">\(X_n\sim\text{PPareto}(\mathbf{t},\boldsymbol\alpha)\)</span>.</li>
</ul>
<p>This approach always works for three layers, but it often does not work if we have three or more layers. For instance, Riegel (2018) shows that it does not work for the following example:</p>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(i\)</span></th>
<th align="right">Cover <span class="math inline">\(c_i\)</span></th>
<th align="right">Att. Pt. <span class="math inline">\(a_i\)</span></th>
<th align="right">Exp. Loss <span class="math inline">\(e_i\)</span></th>
<th align="right">Rate on Line <span class="math inline">\(e_i/c_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td align="right">500</td>
<td align="right">1000</td>
<td align="right">100</td>
<td align="right">0.20</td>
</tr>
<tr class="even">
<td>2</td>
<td align="right">500</td>
<td align="right">1500</td>
<td align="right">90</td>
<td align="right">0.18</td>
</tr>
<tr class="odd">
<td>3</td>
<td align="right">500</td>
<td align="right">2000</td>
<td align="right">50</td>
<td align="right">0.10</td>
</tr>
<tr class="even">
<td>4</td>
<td align="right">500</td>
<td align="right">2500</td>
<td align="right">40</td>
<td align="right">0.08</td>
</tr>
</tbody>
</table>
<p>The Pareto package provides a more complex matching approach that uses two Pareto pieces per layer. Riegel (2018) shows that this approach works for an arbitrary number of layers with consistent expected losses.</p>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>attachment_points <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">2000</span>, <span class="dv">2500</span>, <span class="dv">3000</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>exp_losses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">90</span>, <span class="dv">50</span>, <span class="dv">40</span>, <span class="dv">100</span>)</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">PiecewisePareto_Match_Layer_Losses</span>(attachment_points, exp_losses)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>fit</span></code></pre></div>
<pre><code>## 
## Panjer &amp; Piecewise Pareto model
## 
## Collective model with a Poisson distribution for the claim count and a Piecewise Pareto distributed severity.
## 
## Poisson Distribution:
## Expected Frequency:   0.2136971
## 
## Piecewise Pareto Distribution:
## Thresholds:         1000   1500   1932.059   2000   2147.531   2500   2847.756   3000
## Alphas:              0.3091209   0.1753613   9.685189   3.538534   0.817398   0.7663698   5.086828   2.845488
## The distribution is not truncated.
## 
## Status:               0
## Comments:             OK</code></pre>
<p>The function <code>PiecewisePareto_Match_Layer_Losses</code> returns a <code>PPP_Model</code> object (PPP stands for Panjer &amp; Piecewise Pareto) which contains the information required to specify a collective model with a Panjer distributed claim count and a piecewise Pareto distributed severity. The results can be checked using the attributes <code>FQ</code>, <code>t</code> and <code>alpha</code> of the object:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">PiecewisePareto_Layer_Mean</span>(<span class="dv">500</span>, <span class="dv">1000</span>, fit<span class="sc">$</span>t, fit<span class="sc">$</span>alpha) <span class="sc">*</span> fit<span class="sc">$</span>FQ,</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">PiecewisePareto_Layer_Mean</span>(<span class="dv">500</span>, <span class="dv">1500</span>, fit<span class="sc">$</span>t, fit<span class="sc">$</span>alpha) <span class="sc">*</span> fit<span class="sc">$</span>FQ,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">PiecewisePareto_Layer_Mean</span>(<span class="dv">500</span>, <span class="dv">2000</span>, fit<span class="sc">$</span>t, fit<span class="sc">$</span>alpha) <span class="sc">*</span> fit<span class="sc">$</span>FQ,</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">PiecewisePareto_Layer_Mean</span>(<span class="dv">500</span>, <span class="dv">2500</span>, fit<span class="sc">$</span>t, fit<span class="sc">$</span>alpha) <span class="sc">*</span> fit<span class="sc">$</span>FQ,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">PiecewisePareto_Layer_Mean</span>(<span class="cn">Inf</span>, <span class="dv">3000</span>, fit<span class="sc">$</span>t, fit<span class="sc">$</span>alpha) <span class="sc">*</span> fit<span class="sc">$</span>FQ)</span></code></pre></div>
<pre><code>## [1] 100  90  50  40 100</code></pre>
<p>There are, however, functions which can directly use PPP_Models:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>covers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">diff</span>(attachment_points), <span class="cn">Inf</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Layer_Mean</span>(fit, covers, attachment_points)</span></code></pre></div>
<pre><code>## [1] 100  90  50  40 100</code></pre>
</div>
<div id="matching-reference-information" class="section level2">
<h2>Matching reference information</h2>
<p>The function <code>PiecewisePareto_Match_Layer_Losses</code> can be used to match the expected losses of a complete tower of layers. If we want to match the expected losses of some reference layers which do not form a complete tower then it is more convenient to use the function <code>Fit_References</code>. Also excess frequencies can be provided as reference information. The function can be seen as a user interface for <code>PiecewisePareto_Match_Layer_Losses</code>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>  covers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">1000</span>, <span class="dv">1000</span>)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  att_points <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">5000</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  exp_losses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">50</span>, <span class="dv">10</span>)</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  thresholds <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4000</span>, <span class="dv">10000</span>)</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  fqs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.04</span>, <span class="fl">0.005</span>)</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  fit <span class="ot">&lt;-</span> <span class="fu">Fit_References</span>(covers, att_points, exp_losses, thresholds, fqs)</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Layer_Mean</span>(fit, covers, att_points)</span></code></pre></div>
<pre><code>## [1] 100  50  10</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Excess_Frequency</span>(fit, thresholds)</span></code></pre></div>
<pre><code>## [1] 0.040 0.005</code></pre>
<p>If the package <code>lpSolve</code> is installed then the funcion <code>Fit_References</code> can handle ovelapping layers.</p>
</div>
<div id="interpolation-of-pml-curves" class="section level2">
<h2>Interpolation of PML curves</h2>
<p>The function <code>Fit_PML_Curve</code> can be used fit a <code>PPP_Model</code> that reproduces and interpolates the information provided in the PML curve. A PML curve is a table containing return periods and the corresponding loss amounts:</p>
<table>
<thead>
<tr class="header">
<th><span class="math inline">\(i\)</span></th>
<th align="right">Return Period <span class="math inline">\(r_i\)</span></th>
<th align="right">Amount <span class="math inline">\(x_i\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td align="right">1</td>
<td align="right">1000</td>
</tr>
<tr class="even">
<td>2</td>
<td align="right">5</td>
<td align="right">4000</td>
</tr>
<tr class="odd">
<td>3</td>
<td align="right">10</td>
<td align="right">7000</td>
</tr>
<tr class="even">
<td>4</td>
<td align="right">20</td>
<td align="right">10000</td>
</tr>
<tr class="odd">
<td>5</td>
<td align="right">50</td>
<td align="right">13000</td>
</tr>
<tr class="even">
<td>6</td>
<td align="right">100</td>
<td align="right">14000</td>
</tr>
</tbody>
</table>
<p>The information contained in such a PML curve can be used to create a <code>PPP_Model</code> that has the expected excess frequency <span class="math inline">\(1/r_i\)</span> at <span class="math inline">\(x_i\)</span>.</p>
<p><em>Example:</em></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>return_periods <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">50</span>, <span class="dv">100</span>)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>amounts <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">4000</span>, <span class="dv">7000</span>, <span class="dv">10000</span>, <span class="dv">13000</span>, <span class="dv">14000</span>)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">Fit_PML_Curve</span>(return_periods, amounts)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> <span class="fu">Excess_Frequency</span>(fit, amounts)</span></code></pre></div>
<pre><code>## [1]   1   5  10  20  50 100</code></pre>
</div>
<div id="ppp_models-panjer-piecewise-pareto-models" class="section level2">
<h2>PPP_Models (Panjer &amp; Piecewise Pareto Models)</h2>
<p>A <code>PPP_Model</code> object contains the information required to specify a collective model with a Panjer distributed claim count and a piecewise Pareto distributed severity.</p>
<p><strong>Claim count distribution:</strong> The Panjer class contains the binomial distribution, the Poisson distribution and the negative binomial distribution. The distribution of the claim count <span class="math inline">\(N\)</span> is specified by the expected frequency <span class="math inline">\(E(N)\)</span> (attribute <code>FQ</code> of the object) and the dispersion <span class="math inline">\(D(N):=Var(N)/E(N)\)</span> (attribute <code>dispersion</code> of the object). We have the following cases:</p>
<ul>
<li><code>dispersion &lt; 1</code>: binomial distribution</li>
<li><code>dispersion = 1</code>: Poisson distribution</li>
<li><code>dispersion &gt; 1</code>: negative binomial distribution.</li>
</ul>
<p><strong>Severity distribution:</strong> The piecewise Pareto distribution is specified by the vectors <code>t</code>, <code>alpha</code>, <code>truncation</code> and <code>truncation_type</code>.</p>
<p>The function <code>PiecewisePareto_Match_Layer_Losses</code> returns <code>PPP_Model</code> object. Such an object can also be directly created using the constructor function:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>PPPM <span class="ot">&lt;-</span> <span class="fu">PPP_Model</span>(<span class="at">FQ =</span> <span class="dv">2</span>, <span class="at">t =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>), <span class="at">alpha =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">truncation =</span> <span class="dv">10000</span>, <span class="at">truncation_type =</span> <span class="st">&quot;wd&quot;</span>, <span class="at">dispersion =</span> <span class="fl">1.5</span>)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>PPPM</span></code></pre></div>
<pre><code>## 
## Panjer &amp; Piecewise Pareto model
## 
## Collective model with a Negative Binomial distribution for the claim count and a Piecewise Pareto distributed severity.
## 
## Negative Binomial Distribution:
## Expected Frequency:   2
## Dispersion:           1.5 (i.e. contagion = 0.25)
## 
## Piecewise Pareto Distribution:
## Thresholds:         1000   2000
## Alphas:              1   2
## Truncation:           10000
## Truncation Type:      &#39;wd&#39;
## 
## Status:               0
## Comments:             OK</code></pre>
<div id="expected-loss-standard-deviation-and-variance-for-reinsurance-layers" class="section level3">
<h3>Expected Loss, Standard Deviation and Variance for Reinsurance Layers</h3>
<p>A <code>PPP_Model</code> can directly be used to calculate the expected loss, the standard deviation or the variance of a reinsurance layer: function:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>PPPM <span class="ot">&lt;-</span> <span class="fu">PPP_Model</span>(<span class="at">FQ =</span> <span class="dv">2</span>, <span class="at">t =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>), <span class="at">alpha =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">truncation =</span> <span class="dv">10000</span>, <span class="at">truncation_type =</span> <span class="st">&quot;wd&quot;</span>, <span class="at">dispersion =</span> <span class="fl">1.5</span>)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Layer_Mean</span>(PPPM, <span class="dv">4000</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 2475.811</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Layer_Sd</span>(PPPM, <span class="dv">4000</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 2676.332</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Layer_Var</span>(PPPM, <span class="dv">4000</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 7162754</code></pre>
</div>
<div id="expected-excess-frequency" class="section level3">
<h3>Expected Excess Frequency</h3>
<p>A <code>PPP_Model</code> can directly be used to calculate the expected frequency in excess of a threshold:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>PPPM <span class="ot">&lt;-</span> <span class="fu">PPP_Model</span>(<span class="at">FQ =</span> <span class="dv">2</span>, <span class="at">t =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>), <span class="at">alpha =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">truncation =</span> <span class="dv">10000</span>, <span class="at">truncation_type =</span> <span class="st">&quot;wd&quot;</span>, <span class="at">dispersion =</span> <span class="fl">1.5</span>)</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>thresholds <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">5000</span>, <span class="dv">10000</span>, <span class="cn">Inf</span>)</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="fu">Excess_Frequency</span>(PPPM, thresholds)</span></code></pre></div>
<pre><code>## [1] 2.0000000 2.0000000 0.9795918 0.1224490 0.0000000 0.0000000</code></pre>
</div>
<div id="simulation-of-losses" class="section level3">
<h3>Simulation of Losses</h3>
<p>A <code>PPP_Model</code> can directly be used to simulate losses with the corresponding collective model:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>PPPM <span class="ot">&lt;-</span> <span class="fu">PPP_Model</span>(<span class="at">FQ =</span> <span class="dv">2</span>, <span class="at">t =</span> <span class="fu">c</span>(<span class="dv">1000</span>, <span class="dv">2000</span>), <span class="at">alpha =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">truncation =</span> <span class="dv">10000</span>, <span class="at">truncation_type =</span> <span class="st">&quot;wd&quot;</span>, <span class="at">dispersion =</span> <span class="fl">1.5</span>)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Simulate_Losses</span>(PPPM, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##           [,1]     [,2]     [,3]     [,4]     [,5]
##  [1,] 2854.931      NaN      NaN      NaN      NaN
##  [2,]      NaN      NaN      NaN      NaN      NaN
##  [3,] 1724.511 1899.499 3054.764 2522.207      NaN
##  [4,] 2156.510 1290.258      NaN      NaN      NaN
##  [5,] 4159.505 1021.784 2926.003      NaN      NaN
##  [6,] 4992.884 1671.463 1155.838 1295.721 1138.447
##  [7,] 1241.865 2471.538      NaN      NaN      NaN
##  [8,]      NaN      NaN      NaN      NaN      NaN
##  [9,] 2098.202 1045.150 3903.733      NaN      NaN
## [10,] 2365.764 1757.188 1106.682      NaN      NaN</code></pre>
<p>The function <code>Simulate_Losses</code> returns a matrix where each row contains the losses from one simulation.</p>
<p>Note that for a given expected frequency <code>FQ</code> not every dispersion <code>dispersion &lt; 1</code> is possible for the binomial distribution. In this case a binomial distribution with the smallest dispersion larger than or equal to <code>dispersion</code> is used for the simulation.</p>
</div>
</div>
<div id="generalized-pareto-distribution" class="section level2">
<h2>Generalized Pareto Distribution</h2>
<p><strong>Definition:</strong> Let <span class="math inline">\(t&gt;0\)</span> and <span class="math inline">\(\alpha_\text{ini}, \alpha_\text{tail}&gt;0\)</span>. The <em>generalized Pareto distribution</em> <span class="math inline">\(\text{GenPareto}(t,\alpha_\text{ini}, \alpha_\text{tail})\)</span> is defined by the distribution function <span class="math display">\[
F_{t,\alpha_\text{ini}, \alpha_\text{tail}}(x):=\begin{cases}
0 &amp; \text{ for $x\le t$} \\
\displaystyle 1-\left(1+\frac{\alpha_\text{ini}}{\alpha_\text{tail}} \left(\frac{x}{t}-1\right)\right)^{-\alpha_\text{tail}} &amp; \text{ for $x&gt;t$.}
\end{cases}
\]</span> We do not the standard parameterization from extreme value theory but the parameterization from Riegel (2008) which is useful in a reinsurance context.</p>
<div id="distribution-function-and-density-1" class="section level3">
<h3>Distribution function and density</h3>
<p>The functions <code>pGenPareto</code> and <code>dGenPareto</code> provide the distribution function and the density function of the Pareto distribution:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pGenPareto</span>(x, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 0.0000000 0.5555556 0.7500000 0.8400000 0.8888889 0.9183673 0.9375000
##  [8] 0.9506173 0.9600000 0.9669421</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">pGenPareto</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5000</span>, <span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;CDF(x)&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAAYFBMVEUAAAAAADoAAGYAOjoAOpAAZrY6AAA6ADo6kNtmAABmADpmAGZmOpBmZmZmtttmtv+QOgCQOmaQZgCQ2/+2ZgC2/7a2///bkDrb2//b/9vb////tmb/25D//7b//9v////PAQ5QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAHE0lEQVR4nO2da2ObNhSGaZpk8W71Vlq2EZv//y8HCBwnDry6nKOD8Pt86GgtHcnPhJCEwFVHVqmsK7B1KAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQQFhQVQxWgmTDyTO7oaCPfGg9FPTGp+cXBQ2sdEBKguqqejof+xK+iYRTBPXQOoKax/96R09ddzq8CITTwucKpiLofOy1tF++d05VajgVoJxK8Sp2OvRnVvvws5v/TAsnjo+cyc/9tSBvM6EVjeuDRlXJ4cQIUjNl8Y4dVJMtXsVC1Uy5vMPL1FIpHC4vwo3L6F1Cch01w4HCIuWMeb0LiatbY34VS5AzZvcuJ7qG76KE1U6ywAg5YwDxhCbhFgpJlDPGEE9oEu7TItLtdGqCxkt8z0IPlEGQiJ1ObaBYTePDtrIZKArZ6TSnGg6TqYaYnU5zsuowmKwK2un22IJE9ej1QVMTyt4Hydrp1K5ip4Or30L70RIkrmdn4yB5PbsSpKFnT4JU9OxIkI6e3QhSaj7dXgSp6YkS1E4VWVpuli3XK5iannBB/QDnyR31E/bFubpguT6xFP2ECjr9du3k/d90yvUIpahnD32Qrp8IQed/spaL4ij7iRB0OrhO6PxXfA8kJkhbT+RVbLjr3qR00fI3SdSWT2L6ILfgvLCOAaKIfqEMfuI66cFQ0ihIpgXl8BMlqK6qP4/LSz2y5a6EyOEnqpMez67WvA/KoSdK0O+u6VhfxfL4KXegmMlPsVONXH5Knaxm6Z9dSeEJN7Dckc9PmX1QRj+FC5KqzVpZYQmv7rpnKvezvBn9RAla3PysUe4nWXP60RX0+rzY3hL2o+xA0HxnfkB8+0teP0otaNrUodGCMvvROsVOh2GyryAotx+9Pqj+8v0+BcHeZaapXuQFZfejOVB8ff4qLSi/H9WRdD+dvUdB7ixLW3CNFGTgJ1xQ7VpF43lXQ/RpHwM/wYLck6jd6iV8LUpKI7BoQKGCzsen+R/qp8W0kuVe5zHwE36Zf9sinvuuhkkDSljuWHrIYETjaR8TP0qCNJ72sWlAOoI0ntUw8qMjSONpHyM/OnMxhRZk1YCUphryT/tY+dGai4k/7VOOIDdUfH1OXLcP/KZmfiJuPbtGMf9XvdwpeTGC6tnL4su3hMt1qc38hM/F4PVJuFyXuhhBvlMNuXLHxCUJspisGvoJ74PeljuynWKWDShY0GWdLG7BLLzczrYBhY+DprGx75JrcrldaYKmpZ6k5cSQco39lLCBioJASgoCKU395BZUhbeH+xIUUa6tHwqC5YsnlC6XgtbTGfuhIFgB8YSy4SgIJLP2Q0GwBuIJRcNREEhl7oeCYBXEE0qG268gmQ1UG/CjtnlBZAPVbgVJbX/ZrSChDVRb8LPpFrRfQUIbqHYsSGYD1Rb82I6DKi9kC46qqGhC/3B+fnYuaOVpH08/Oxf0McrV1y7Cj+UpRkEoXAl+bCerBfjZ9mR1C5hNNYpBQ5D3XlgUFHye9nFq9oTk3rup71WQx2TVL+huBeHJql/Q/QoSCkpBaZ9TEAWlfU5Bdy9oT1AQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCCAvKC2qubXevox3o18eZf19mAd97qI6OxriAsaXnrahtTqfOxTN8MT+5estwegzHGRPDr7KtKC3K2hkPedupdhNA8/L1lvD9Y5HQZB0dnXkRZ0+bqB+fr/0ZestwfreZvHv3tB0dnXERf0y9Ciw19CVPffZ856e4CKHPqg2OwAaUHulA8+8Yc7kZestwdrWYcTaRAUmR2xDUHt3EdHfMPhLnhBgqKatbuTHXeOjGkKOsViOsbm+gdfQnvZZtrO8q2QTjri0jpviUi4TtflXObDB2dvb/+MH+nV5QwUxzYfVKfpHHG/xD1lvT1Yx001orOvwckqgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCEBBAAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIsHVBw/6wxN9+TWPrgoZdYmk//ZrI1gV17cOPXxP3QCWxeUFdnfzDi0lsX1BbJf2waSqbF3Q+/pG2jzeRzQtqHv89Gl7ENi9oeDVh4l75NLYuyG0RN+ymty7IHAoCUBCAggAUBKAgAAUBKAhAQQAKAlAQgIIAFASgIAAFASgIQEEACgJQEICCABQEoCAABQEoCPA/cqjctwKHjugAAAAASUVORK5CYII=" /><!-- --></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dGenPareto</span>(x, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1.000000e-03 2.962963e-04 1.250000e-04 6.400000e-05 3.703704e-05
##  [6] 2.332362e-05 1.562500e-05 1.097394e-05 8.000000e-06 6.010518e-06</code></pre>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">dGenPareto</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5000</span>, <span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">2</span>), <span class="at">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="at">ylab =</span> <span class="st">&quot;PDF(x)&quot;</span>)</span></code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The package also provides the quantile function:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qGenPareto</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">/</span> <span class="dv">10</span>, <span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1000.000 1108.185 1236.068 1390.457 1581.989 1828.427 2162.278 2651.484
##  [9] 3472.136 5324.555      Inf</code></pre>
</div>
<div id="simulation-2" class="section level3">
<h3>Simulation:</h3>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rGenPareto</span>(<span class="dv">20</span>, <span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  3250.889  1838.973  6065.089  1671.509  1703.054 16647.045  1254.244
##  [8]  1169.038  1127.066  1241.358  4028.926  1085.437  1747.497  2472.309
## [15]  1426.704  1002.570  1304.151  1412.421  5947.293  4410.795</code></pre>
</div>
<div id="layer-mean-2" class="section level3">
<h3>Layer mean:</h3>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">GenPareto_Layer_Mean</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="at">t =</span> <span class="dv">500</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 484.8485</code></pre>
</div>
<div id="layer-variance-2" class="section level3">
<h3>Layer variance:</h3>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">GenPareto_Layer_Var</span>(<span class="dv">4000</span>, <span class="dv">1000</span>, <span class="at">t =</span> <span class="dv">500</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 908942.5</code></pre>
</div>
<div id="maximum-likelihood-estimation-of-the-alpha_ini-and-alpha_tail" class="section level3">
<h3>Maximum likelihood estimation of the alpha_ini and alpha_tail</h3>
<p>Let <span class="math inline">\(t&gt;0\)</span> and <span class="math inline">\(\alpha_\text{ini}, \alpha_\text{tail}&gt;0\)</span> and let <span class="math inline">\(X_i\sim \text{GenPareto}(t,\alpha_\text{ini}, \alpha_\text{tail})\)</span>. For known <span class="math inline">\(t\)</span> the parameters <span class="math inline">\(\alpha_\text{ini}, \alpha_\text{tail}\)</span> can be estimated with maximum likelihood.</p>
<p><em>Example:</em></p>
<p>Generalized Pareto distributed losses with <span class="math inline">\(t:=1000\)</span> and <span class="math inline">\(\alpha_\text{ini}=1\)</span>, <span class="math inline">\(\alpha_\text{tail}=2\)</span>:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> <span class="fu">rGenPareto</span>(<span class="dv">10000</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>)</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">GenPareto_ML_Estimator_Alpha</span>(losses, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 0.9787852 2.0844113</code></pre>
<p>Reporting thresholds and censoring of losses can be taken into account as described for the function <code>Pareto_ML_Estimator_Alpha</code>.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>losses_1 <span class="ot">&lt;-</span> <span class="fu">rGenPareto</span>(<span class="dv">5000</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>losses_2 <span class="ot">&lt;-</span> <span class="fu">rGenPareto</span>(<span class="dv">5000</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>)</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>reported <span class="ot">&lt;-</span> losses_2 <span class="sc">&gt;</span> <span class="dv">3000</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>losses_2 <span class="ot">&lt;-</span> losses_2[reported]</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> <span class="fu">c</span>(losses_1, losses_2)</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="fu">GenPareto_ML_Estimator_Alpha</span>(losses, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 0.635907 2.197439</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>reporting_thresholds_1 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1000</span>, <span class="fu">length</span>(losses_1))</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>reporting_thresholds_2 <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">3000</span>, <span class="fu">length</span>(losses_2))</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>reporting_thresholds <span class="ot">&lt;-</span> <span class="fu">c</span>(reporting_thresholds_1, reporting_thresholds_2)</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="fu">GenPareto_ML_Estimator_Alpha</span>(losses, <span class="dv">1000</span>, </span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>                             <span class="at">reporting_thresholds =</span> reporting_thresholds)</span></code></pre></div>
<pre><code>## [1] 0.9576829 1.9998593</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>limits <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="dv">2500</span>, <span class="dv">5000</span>, <span class="dv">10000</span>), <span class="fu">length</span>(losses), <span class="at">replace =</span> T)</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>censored <span class="ot">&lt;-</span> losses <span class="sc">&gt;</span> limits</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>losses[censored] <span class="ot">&lt;-</span> limits[censored]</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>reported <span class="ot">&lt;-</span> losses <span class="sc">&gt;</span> reporting_thresholds</span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>losses <span class="ot">&lt;-</span> losses[reported]</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>reporting_thresholds <span class="ot">&lt;-</span> reporting_thresholds[reported]</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>censored <span class="ot">&lt;-</span> censored[reported]</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="fu">GenPareto_ML_Estimator_Alpha</span>(losses, <span class="dv">1000</span>, </span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>                             <span class="at">reporting_thresholds =</span> reporting_thresholds)</span></code></pre></div>
<pre><code>## [1] 0.8887291 5.9222437</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">GenPareto_ML_Estimator_Alpha</span>(losses, <span class="dv">1000</span>, </span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">reporting_thresholds =</span> reporting_thresholds, </span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">is.censored =</span> censored)</span></code></pre></div>
<pre><code>## [1] 0.963454 1.962438</code></pre>
</div>
<div id="truncation-2" class="section level3">
<h3>Truncation</h3>
<p>Let <span class="math inline">\(X\sim \text{GenPareto}(t, \alpha_\text{ini}, \alpha_\text{tail})\)</span> and <span class="math inline">\(T&gt;t\)</span>. Then <span class="math inline">\(X|(X&lt;T)\)</span> has a <em>truncated generalized Pareto distribution</em>. The Pareto functions mentioned above are also available for the truncated generalized Pareto distribution.</p>
</div>
</div>
<div id="pgp_models-panjer-generalized-pareto-models" class="section level2">
<h2>PGP_Models (Panjer &amp; Generalized Pareto Models)</h2>
<p>A <code>PGP_Model</code> object contains the information required to specify a collective model with a Panjer distributed claim count and a generalized Pareto distributed severity.</p>
<p><strong>Claim count distribution:</strong> Like in a <code>PPP_Model</code> the claim count distribution from the Panjer class is specified by the expected frequency <span class="math inline">\(E(N)\)</span> (attribute <code>FQ</code> of the object) and the dispersion <span class="math inline">\(D(N):=Var(N)/E(N)\)</span> (attribute <code>dispersion</code> of the object).</p>
<p><strong>Severity distribution:</strong> The generalized Pareto distribution is specified by the parameters <code>t</code>, <code>alpha_ini</code>, <code>alpha_tail</code> and <code>truncation</code>.</p>
<p>A <code>PPP_Model</code> object can be created using the constructor function:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>PGPM <span class="ot">&lt;-</span> <span class="fu">PGP_Model</span>(<span class="at">FQ =</span> <span class="dv">2</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>, </span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">truncation =</span> <span class="dv">10000</span>, <span class="at">dispersion =</span> <span class="fl">1.5</span>)</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>PGPM</span></code></pre></div>
<pre><code>## 
## Panjer &amp; Generalized Pareto model
## 
## Collective model with a Negative Binomial distribution for the claim count and a generalized Pareto distributed severity.
## 
## Negative Binomial Distribution:
## Expected Frequency:   2
## Dispersion:           1.5 (i.e. contagion = 0.25)
## Generalized Pareto Distribution:
## Threshold:            1000
## alpha_ini:            1
## alpha_tail:           2
## Truncation:           10000
## 
## Status:               0
## Comments:             OK</code></pre>
<div id="methods-for-pgp_models" class="section level3">
<h3>Methods for PGP_Models</h3>
<p>For PGP_Models the same methods are available as for PPP_Models:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>PGPM <span class="ot">&lt;-</span> <span class="fu">PGP_Model</span>(<span class="at">FQ =</span> <span class="dv">2</span>, <span class="at">t =</span> <span class="dv">1000</span>, <span class="at">alpha_ini =</span> <span class="dv">1</span>, <span class="at">alpha_tail =</span> <span class="dv">2</span>, </span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">truncation =</span> <span class="dv">10000</span>, <span class="at">dispersion =</span> <span class="fl">1.5</span>)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Layer_Mean</span>(PGPM, <span class="dv">4000</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 2484.33</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Layer_Sd</span>(PGPM, <span class="dv">4000</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 2756.15</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Layer_Var</span>(PGPM, <span class="dv">4000</span>, <span class="dv">1000</span>)</span></code></pre></div>
<pre><code>## [1] 7596365</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>thresholds <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="dv">2000</span>, <span class="dv">5000</span>, <span class="dv">10000</span>, <span class="cn">Inf</span>)</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Excess_Frequency</span>(PGPM, thresholds)</span></code></pre></div>
<pre><code>## [1] 2.0000000 2.0000000 0.8509022 0.1614435 0.0000000 0.0000000</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Simulate_Losses</span>(PGPM, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>##           [,1]     [,2]     [,3]     [,4]
##  [1,] 1521.848 1194.747 2172.534      NaN
##  [2,] 1361.549 4106.740      NaN      NaN
##  [3,] 3299.299 1553.965      NaN      NaN
##  [4,] 2635.675 1036.588 1096.835      NaN
##  [5,] 3734.274      NaN      NaN      NaN
##  [6,] 3185.860 4633.497 4676.543 1047.863
##  [7,] 5123.614 2463.131 1157.193      NaN
##  [8,] 2265.114 1080.051 4129.473      NaN
##  [9,] 1066.235 2384.368      NaN      NaN
## [10,]      NaN      NaN      NaN      NaN</code></pre>
</div>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<p>Fackler, M. (2013) Reinventing Pareto: Fits for both small and large losses. ASTIN Colloquium Den Haag</p>
<p>Johnson, N.L., and Kotz, S. (1970) Continuous Univariate Distributions-I. Houghton Mifflin Co</p>
<p>Philbrick, S.W. (1985) A Practical Guide to the Single Parameter Pareto Distribution. PCAS LXXII: 44–84</p>
<p>Riegel, U. (2008) Generalizations of common ILF models. Bl&quot;{a}tter der DGVFM 29: 45–71</p>
<p>Riegel, U. (2018) Matching tower information with piecewise Pareto. European Actuarial Journal 8(2): 437–460</p>
<p>Schmutz, M., and Doerr, R.R. (1998) Das Pareto-Modell in der Sach-Rueckversicherung. Formeln und Anwendungen. Swiss Re Publications, Zuerich</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
